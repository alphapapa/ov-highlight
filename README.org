#+TITLE: ov-highlighter

ov-highlighter provides a lightweight way to highlight text and put notes on
them using overlays that are locally stored.

ov-highlighter defines a local save-buffer-hook to automatically update and save highlights. It uses local file variables to load the highlights and apply them when the file is opened. All of the data is stored in a single line of base64 encoded text that is made mostly invisible by Emacs.

* Features
** Pre-defined highlights
   
There are several pre-defined highlights that are accessed from a hydra menu 
=ov-highlighter/body=. I suggest you bind it to a key like H-h.

- green, pink, yellow backgrounds
- an interactive background chooser
- an interactive text color chooser

There are several markups highlights:
- bold, italic, underline, strikethrough, and box

You can change the font size as well as the font.

For editing, you can use typo, comment, delete and insert highlights.

** Define your own highlights
   
The library defines a macro =ov-make-highlight= to make your own highlights. The macro takes a name, a face, and other properties as arguments.

For example, here is the type highlight that puts a reddish background and tooltip on the highlight.

#+BEGIN_SRC emacs-lisp
(ov-make-highlight "typo" '(:background "PaleVioletRed1") help-echo "tpyo")
#+END_SRC

That macro creates the command =ov-highlight-typo=. See https://www.gnu.org/software/emacs/manual/html_node/elisp/Face-Attributes.html for details on setting face attributes. 

** List the highlights
   
You can use =ov-highlight-display= to see a list of the highlights, jump to one of them and delete one or all of them conveniently.

** Cut/copy/paste highlights
   
=ov-highlighter-cut-copy-paste-on= and =ov-highlighter-cut-copy-paste-off= control whether you can copy and paste highlights around. This works within a buffer. 

** Write highlights to html
   
=ov-highlighter-html= will write the buffer to an html file that retains the highlights.

* Known limitations
  
Highlights are basically fragile. There are many ways to mess them up.

1. You cannot edit the files with other editors, or the positions of the highlights will be messed up. This means if you put annotations in a file that is under version control, and then pull someone else's changes in, the highlights are likely to break.
2. The annotations will not export in org-mode. Highlights are presented as overlays, and are not part of the markup. There is some support to convert them to html using =ov-highlighter-html= via the htmlize library.

* Examples

Note: These will not be visible without installing ov-highlighter. See [[./README.html]] to see what they look like. Not all the markups convert to html, but most of them do. The tooltips are not preserved either.

- green
- pink
- yellow
- my choice (LightSalmon2)
- dark red text

** Markup examples

bold, italic, underlined, struck, boxed
   
Big, little, Comic Sans font

Delete this text, replace it with this. You mispleled this. You can also add comments.

#  ov-highlight-data: KCgzMDA2IDMwMzEgKG92LXR5cGUgImNvbW1lbnQiIG92LWhpZ2hsaWdodCB0IGhlbHAtZWNobyAiVGhpcyBpcyBhIHBsYWNlIHRvIGFkZCBjb21tZW50cyB3aXRob3V0IG1vZGlmeWluZyB0aGUgYnVmZmVyLiIgbG9jYWwtbWFwIChrZXltYXAgKG1vdXNlLTEgbGFtYmRhIG5pbCAoaW50ZXJhY3RpdmUpIChzZXRxICpvdi13aW5kb3ctY29uZmlndXJhdGlvbiogKGN1cnJlbnQtd2luZG93LWNvbmZpZ3VyYXRpb24pKSAobGV0ICgoY2IgKGN1cnJlbnQtYnVmZmVyKSkgKGN1cnJlbnQtbm90ZSAob3ZlcmxheS1nZXQgKG92LWhpZ2hsaWdodC1nZXQtY29tbWVudC1vdikgKHF1b3RlIGhlbHAtZWNobykpKSkgKHN3aXRjaC10by1idWZmZXIgIipvdi1ub3RlKiIpIChlcmFzZS1idWZmZXIpIChvcmctbW9kZSkgKGluc2VydCAob3IgY3VycmVudC1ub3RlICIiKSkgKGxldCAoKG1hcCAobWFrZS1zcGFyc2Uta2V5bWFwKSkpIChzZXRxIGhlYWRlci1saW5lLWZvcm1hdCAiQ2xpY2sgaGVyZSBvciB0eXBlIHMtPHJldHVybj4gdG8gZmluaXNoLiBDLXggayB0byBjYW5jZWwuIikpIChsb2NhbC1zZXQta2V5IChrYmQgIkMteCBrIikgKFxgIChsYW1iZGEgbmlsIChpbnRlcmFjdGl2ZSkgKGtpbGwtYnVmZmVyKSkpKSAobG9jYWwtc2V0LWtleSAoa2JkICJzLTxyZXR1cm4+IikgKFxgIChsYW1iZGEgbmlsIChpbnRlcmFjdGl2ZSkgKGxldCAoKHRvb2x0aXAgKGJ1ZmZlci1zdWJzdHJpbmctbm8tcHJvcGVydGllcyAocG9pbnQtbWluKSAocG9pbnQtbWF4KSkpKSAoa2lsbC1idWZmZXIpIChzZXQtd2luZG93LWNvbmZpZ3VyYXRpb24gKm92LXdpbmRvdy1jb25maWd1cmF0aW9uKikgKHNldHEgKm92LXdpbmRvdy1jb25maWd1cmF0aW9uKiBuaWwpIChvdmVybGF5LXB1dCAob3YtaGlnaGxpZ2h0LWdldC1jb21tZW50LW92KSAocXVvdGUgaGVscC1lY2hvKSB0b29sdGlwKSkpKSkpKSkgbW91c2UtZmFjZSBoaWdobGlnaHQgZmFjZSAoOmJhY2tncm91bmQgIk9yYW5nZTEiKSkpICgyOTkwIDI5OTkgKG92LXR5cGUgInR5cG8iIG92LWhpZ2hsaWdodCB0IGhlbHAtZWNobyAidHB5byIgZmFjZSAoOmJhY2tncm91bmQgIlBhbGVWaW9sZXRSZWQxIikpKSAoMjk2NCAyOTg0IChvdi10eXBlICJpbnNlcnQiIG92LWhpZ2hsaWdodCB0IGZhY2UgKDpmb3JlZ3JvdW5kICJibHVlIikpKSAoMjk0NiAyOTYyIChvdi10eXBlICJkZWxldGUiIG92LWhpZ2hsaWdodCB0IGZhY2UgKDpmb3JlZ3JvdW5kICJyZWQiIDpzdHJpa2UtdGhyb3VnaCB0KSkpICgyOTI5IDI5NDQgKG92LXR5cGUgImZvbnQiIG92LWhpZ2hsaWdodCB0IGZhY2UgKDpmYW1pbHkgIkNvbWljIFNhbnMgTVMiKSkpICgyOTIxIDI5MjcgKG92LWhpZ2hsaWdodCB0IGZhY2UgKDpoZWlnaHQgOTApKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MjAgMjkyMCAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MTkgMjkxOSAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MTkgMjkxOSAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MTkgMjkxOSAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxMjYpKSkgKDI5MTkgMjkxOSAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxNTQpKSkgKDI5MTkgMjkxOSAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxNTQpKSkgKDI5MTYgMjkxOSAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAzMjEpKSkgKDI5MTYgMjkxOSAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxNTQpKSkgKDI5MTYgMjkxOSAob3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmhlaWdodCAxNDYpKSkgKDI5MDYgMjkxMSAob3YtdHlwZSAiYm94IiBvdi1oaWdobGlnaHQgdCBmYWNlICg6Ym94IHQpKSkgKDI4OTggMjkwNCAob3YtdHlwZSAic3RyaWtldGhyb3VnaCIgb3YtaGlnaGxpZ2h0IHQgZmFjZSAoOnN0cmlrZS10aHJvdWdoIHQpKSkgKDI4ODYgMjg5NiAob3YtdHlwZSAidW5kZXJsaW5lIiBvdi1oaWdobGlnaHQgdCBmYWNlICg6dW5kZXJsaW5lIHQpKSkgKDI4NzggMjg4NCAob3YtdHlwZSAiaXRhbGljIiBvdi1oaWdobGlnaHQgdCBmYWNlICg6c2xhbnQgaXRhbGljKSkpICgyODcyIDI4NzYgKG92LXR5cGUgImJvbGQiIG92LWhpZ2hsaWdodCB0IGZhY2UgKDp3ZWlnaHQgYm9sZCkpKSAoMjgzNyAyODUwIChvdi10eXBlICJmb3JlZ3JvdW5kIiBvdi1oaWdobGlnaHQgdCBmYWNlICg6Zm9yZWdyb3VuZCAiZGFyayByZWQiKSkpICgyODEwIDI4MzQgKG92LXR5cGUgImNvbG9yIiBvdi1oaWdobGlnaHQgdCBmYWNlICg6YmFja2dyb3VuZCAiTGlnaHRTYWxtb24xIikpKSAoMjgwMSAyODA3IChvdi10eXBlICJ5ZWxsb3ciIG92LWhpZ2hsaWdodCB0IGZhY2UgKDpiYWNrZ3JvdW5kICJZZWxsb3ciKSkpICgyNzk0IDI3OTggKG92LXR5cGUgInBpbmsiIG92LWhpZ2hsaWdodCB0IGZhY2UgKDpiYWNrZ3JvdW5kICJQaW5rIikpKSAoMjc4NiAyNzkxIChvdi10eXBlICJncmVlbiIgb3YtaGlnaGxpZ2h0IHQgZmFjZSAoOmJhY2tncm91bmQgIkRhcmtvbGl2ZWdyZWVuMSIpKSkp

# Local Variables:
# eval: (ov-highlight-load)
# End:
